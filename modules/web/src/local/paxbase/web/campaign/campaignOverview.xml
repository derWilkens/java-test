<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://caption"
        class="local.paxbase.web.campaign.CampaignOverview"
        messagesPack="local.paxbase.web.campaign">
    <dsContext>
        <collectionDatasource id="campaignsDs"
                              class="local.paxbase.entity.Campaign"
                              view="campaignOverview">
            <query>
                <![CDATA[select e from paxbase$Campaign e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="sitesDs"
                              class="local.paxbase.entity.coredata.Site"
                              view="siteSelect">
            <query>
                <![CDATA[select e from paxbase$Site e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="userPreferencesDs"
                              class="local.paxbase.entity.UserPreference"
                              view="_local">
            <query>
                <![CDATA[select e from paxbase$UserPreference e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="functionCategoriesDs"
                              class="local.paxbase.entity.coredata.FunctionCategory">
            <query>
                <![CDATA[select e from paxbase$FunctionCategory e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="dutyPeriodsDs"
                              class="local.paxbase.entity.DutyPeriod">
            <query>
                <![CDATA[select e from paxbase$DutyPeriod e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="personOnDutyListDs"
                              class="local.paxbase.entity.OffshoreUser"
                              view="_local">
            <query>
                <![CDATA[select e.personOnDuty from paxbase$ServicePeriod e]]>
            </query>
        </collectionDatasource>
    </dsContext>
    <actions>
        <action id="save"
                caption="mainMsg://actions.Ok"
                icon="icons/ok.png"
                invoke="save"
                shortcut="CTRL-ENTER"/>
        <action id="cancel"
                caption="mainMsg://actions.Cancel"
                icon="icons/cancel.png"
                invoke="cancel"/>
    </actions>
    <dialogMode height="600"
                width="800"/>
    <layout>
        <vbox id="timelineBox"
              spacing="true"/>
        <hbox height="100%"
              spacing="true"
              width="100%">
            <table id="typeUserSettings"
                   height="100%"
                   width="100%">
                <columns>
                    <column id="parentType"/>
                    <column id="typeName"/>
                    <column id="selected"/>
                    <column id="periodSubClass"/>
                </columns>
                <rows datasource="functionCategoriesDs"/>
            </table>
            <vbox spacing="true">
                <table id="siteUserSettings"
                       height="100%"
                       settingsEnabled="false"
                       width="100%">
                    <columns>
                        <column id="siteName"/>
                    </columns>
                    <rows datasource="sitesDs"/>
                </table>
            </vbox>
            <table id="personsOnDutyTable"
                   height="100%"
                   width="100%">
                <columns>
                    <column id="login"/>
                    <column id="name"/>
                    <column id="firstName"/>
                    <column id="lastName"/>
                </columns>
                <rows datasource="personOnDutyListDs"/>
            </table>
        </hbox>
    </layout>
</window>
