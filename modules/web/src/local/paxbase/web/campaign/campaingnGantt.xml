<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://caption"
        class="local.paxbase.web.campaign.Campaingngantt"
        messagesPack="local.paxbase.web.campaign"
        xmlns:chart="http://schemas.haulmont.com/charts/charts.xsd">
    <dsContext>
        <collectionDatasource id="sitesDs"
                              class="local.paxbase.entity.coredata.Site"
                              view="siteCampaignsView">
            <query>
                <![CDATA[select e from paxbase$Site e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="campaignsDs"
                              class="local.paxbase.entity.Campaign"
                              view="campaign-view">
            <query>
                <![CDATA[select e from paxbase$Campaign e]]>
            </query>
        </collectionDatasource>
    </dsContext>
    <dialogMode height="600"
                width="800"/>
    <layout>
        <filter/>
        <split id="splitBox"
               height="100%"
               orientation="vertical"
               width="100%">
            <table height="100%"
                   width="100%">
                <columns>
                    <column id="campaignNo"/>
                    <column id="beginDate"/>
                    <column id="endDate"/>
                </columns>
                <rows datasource="campaignsDs"/>
            </table>
            <!-- 
            https://docs.amcharts.com/3/javascriptcharts/AmGanttChart
             -->
            <chart:ganttChart additionalSegmentFields="site"
                              balloonDateFormat="JJ:NN"
                              brightnessStep="7"
                              categoryField="siteName"
                              columnWidth="0.5"
                              datasource="sitesDs"
                              endDateField="endDate"
                              height="100%"
                              marginRight="70"
                              period="DAYS"
                              responsive="true"
                              rotate="true"
                              segmentsField="campaigns"
                              startDate="2016-01-01"
                              startDateField="beginDate"
                              theme="LIGHT"
                              width="100%">
                <chart:graph balloonText="&lt;strong&gt;[[task]]&lt;/strong&gt;: [[open]] - [[value]]"
                             fillAlphas="1"
                             lineAlpha="1"
                             lineColor="WHITE"/>
                <chart:valueAxis type="DATE"/>
                <!--chart:valueScrollbar autoGridCount="true"
                                      color="BLACK"/-->
                <chart:chartCursor cursorAlpha="0"
                                   cursorColor="#55bb76"
                                   fullWidth="true"
                                   valueBalloonsEnabled="false"
                                   valueLineAlpha="0.5"
                                   valueLineBalloonEnabled="true"
                                   valueLineEnabled="true"
                                   valueZoomable="true"
                                   zoomable="false"/>
                <chart:export/>
            </chart:ganttChart>
        </split>
        
    </layout>
</window>
